---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import BlogPostCard from "../components/BlogPostCard.astro";

const posts = (await getCollection("blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout title="BRUTAL BLOG">
	<section style="margin-bottom: 4rem;">
		<h2
			style="background: var(--color-secondary); display: inline-block; padding: 0.5rem 1rem; border: 4px solid black; margin-bottom: 2rem;"
		>
			LATEST INTEL
		</h2>
		<div style="display: grid; gap: 2rem;">
			{posts.map((post) => <BlogPostCard post={post} />)}
		</div>
	</section>

	<section
		class="brutalist-card"
		style="background: var(--color-accent); color: white;"
	>
		<h2>JOIN THE RESISTANCE</h2>
		<p>
			Sign up for our newsletter to get more brutalist takes delivered to
			your inbox.
		</p>
		<form
			style="margin-top: 1.5rem; display: flex; gap: 1rem; flex-wrap: wrap;"
		>
			<input
				type="email"
				placeholder="EMAIL@EXAMPLE.COM"
				style="flex: 1; padding: 0.75rem; border: 4px solid black; font-family: inherit; font-weight: bold;"
			/>
			<button
				type="submit"
				class="brutalist-button"
				style="background: black; color: white; border-color: white;"
				>SUBSCRIBE</button
			>
		</form>
	</section>
</BaseLayout>
